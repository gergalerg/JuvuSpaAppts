{% extends "search_base.html" %}
{% block html_head %}
<link rel="stylesheet/less" href="/static/search_home.less" type="text/css">
<script src="/static/js/less.js" type="text/javascript"></script>
<script src="/static/js/lib/dotscal.js" type="text/javascript"></script>
<script src="/static/js/lib/search_home.js" type="text/javascript"></script>
<script type="text/javascript">
//-------------------------------------------------------
// Static Data
//

var root = {{ tree_data|safe }};

// Convert the (server-embedded) JSON to KO models.
root.children = _.map(root.children, function(n) { return new SpaProcedure(n); });


$(function(){

    $("#main_frame").hide();
    $(".pane").hide();
    $("#miles_criteria").hide();
    $("#when_criteria").hide();
    $("#amenities").hide();
    $(".option_box").hide();
    $("#price_options").hide();
    $("#discount_options").hide();
    $("#meplus_options").hide();

    ko.applyBindings(viewModel);

    $("#id_miles").keyup(function () {
        if ($(this).val().length > 0) {
            CriteriaControls.show_when()
        } else {
            CriteriaControls.hide_when()
        }
    });

    $("#dist_link").click(CriteriaControls.show_miles);

    $(".bool_opt").click(function() {
        console.log("Hey!")
        $(this).toggleClass("selected");
    })

    $("#from_date_cal").datepicker({
        minDate: "+0D",
        showOtherMonths: true,
        selectOtherMonths: true,
        altField: '#from_date',
        onSelect: date_selected
    });

    $("#to_date_cal").datepicker({
        minDate: "+0D",
        showOtherMonths: true,
        selectOtherMonths: true,
        altField: '#to_date',
        onSelect: date_selected
    });

    vis2 = d3.select("#chart").append("svg:svg")
        .attr("width", w + m[1] + m[3])
        .attr("height", h + m[0] + m[2])
      .append("svg:g")
        .attr("transform", "translate(" + m[3] + "," + m[0] + ")");

    root.x0 = h / 2;
    root.y0 = 0;
    root.children.forEach(collapse);
    update(root);

    vis3 = d3.select("#show")
        .append("svg:svg")
        .attr("width", dw)
        .attr("height", 1.9 * dh)
        .attr("id", "uncanny");

    var circles = vis3.selectAll("circle")
        .data(data)
    .enter().append("svg:circle")
        .attr("stroke-width", "none")
        .call(year_style)
        .call(mouse_bindings);

    setup_month_tabs(vis3);

    crambery(3);

    if (!Backbone.history.start()) {
        routes.navigate("toc", true);
    }
});
</script>
{% endblock %}

{% block title %}Spa Home{% endblock %}

{% block header %}
{% endblock %}

{% block toc %}
	<h1 id="logotype"><a href="/">Ju<span class="davee">V</span>uu</a></h1>
	<h2 id="tagline">This is our subtitle!</h2>

	<center>
	<form method="POST" action="{% url signup %}">
	  {% csrf_token %}
      <table> 
      <tr><th rowspan="2"><h3>Login</h3></th>
        <td><label for="id_email">email</label></td>
        <td><input type="text" name="email" id="id_email" class="input-text" /></td>
      </tr>
      <tr>
        <td><label for="id_pass">password</label></td>
        <td><input type="password" name="hours" id="id_pass" class="input-text" /></td>
      </tr>
      </table>
      <br>
      <a id="search" href="{% url signup %}" class="blue_button">Sign Up</a>
      <br>
      <br>
      <br>
      <h3><a id="0_link" href="#step/0">{{ name }}</a></h3>
		<input value="Spas" id="treatment" name="treatment" type="hidden" placeholder="Looking for... a spa?"> 
		<input value="355 Bryant St, SF" id="location" name="location" type="hidden" placeholder="Where are you?"> 
		<input type="hidden" name="today" value="on" />
    </form>
    </center>
{% endblock %}

{% block pane_0 %}
<div id="chart"></div>
<div style="text-align:right"><a href="/#step/1" class="blue_button">Go</a></div>
{% endblock %}

{% block pane_1 %}
<a
  data-bind="click: function() { viewModel.time_mode('year');select_year() }"
  style="cursor:pointer"
  >Year</a>
<div class="row"><div class="twelve columns">
<div id="show"></div>
</div>{# columns #}</div>{# row #}

<div class="row"><div class="twelve columns">
<div class="criteria">





<div id="distance_criteria">
<h2 id="where">Where?</h2><h3><a href="#" id="dist_link">Distance</a></h3><h3><a href="#">Neighborhood</a></h3>
<div id="miles_criteria">
  <input type="text" name="miles" id="id_miles" class="input-text" size="4" />
  miles from [ADDRESS] <a href="#">Change Address</a>
</div>
</div>{# distance_criteria #}





<div id="when_criteria">
<h2 id="when">When?</h2><h3><a href="#">Today</a></h3><h3><a href="#">Date Range</a></h3>
<div id="date_criteria">
<input name="from_date" id="from_date_cal"/>
<input name="to_date" id="to_date_cal"/>
</div>{# date_criteria #}
</div>{# when_criteria #}





<div id="options_criteria">
<h2 id="when">Options</h2>
<div>





<h4 id="price_header" class="elbowroom"><a href="#" data-bind="click: CriteriaControls.show_price">Price</a></h4>
<div style="display:inline-block">
<div id="price_options">
  <input type="text" name="from_price" id="from_price"/>
  to
  <input type="text" name="to_price" id="to_price"/>
</div>
</div>



<h4 id="discount_header" class="elbowroom"><a href="#" data-bind="click: CriteriaControls.show_discount">Discount</a></h4>
<div style="display:inline-block">
<div id="discount_options">
  <input type="text" name="discount" id="discount"/>%
</div>
</div>



<h4 class="elbowroom"><a data-bind="click: CriteriaControls.toggle_amenities">Amenities</a></h4>
<h4 class="elbowroom"><a class="bool_opt">Credit Cards</a></h4>
<h4 class="elbowroom"><a class="bool_opt">Public Trans</a></h4>
<h4 class="elbowroom"><a class="bool_opt">Parking</a></h4>
<h4 id="meplus_header" class="elbowroom"><a data-bind="click: CriteriaControls.show_meplus">Me+</a></h4>
<div style="display:inline-block">
<div id="meplus_options">
  <input type="text" name="meplus" id="meplus"/>
</div>
</div>



<div id="amenities">
  <h4 class="elbowroom"><a class="bool_opt">Lockers/Robes</a></h4>
  <h4 class="elbowroom"><a class="bool_opt">Steam</a></h4>
  <h4 class="elbowroom"><a class="bool_opt">Sauna</a></h4>
  <h4 class="elbowroom"><a class="bool_opt">Lounges</a></h4>
  <h4 class="elbowroom"><a class="bool_opt">Pool</a></h4>
  <h4 class="elbowroom"><a class="bool_opt">Whirlpool</a></h4>
</div>

</div>
</div>{# options_criteria #}

</div>{# criteria #}
</div>{# columns #}</div>{# row #}
{% endblock %}

{% block pane_2 %}
<div class="row">
<div class="three columns"></div>{# columns #}
<div class="five columns"></div>{# columns #}
<div class="four columns"></div>{# columns #}
</div>{# row #}
{% endblock %}

{% block pane_3 %}
  <div class="row">
  <div class="four columns"></div>
  <div class="eight columns"></div>
  </div>{# row #}
{% endblock %}

{% block pane_4 %}
<div class="row">
<div class="one columns"></div>{# columns #}
<div class="eleven columns"></div>{# columns #}
</div>{# row #}
{% endblock %}

{% block body %}
{% endblock %}
