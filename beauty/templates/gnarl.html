{% extends "base.html" %}
{% block html_head %}
<script type="text/javascript" src="/static/js/bbone/underscore.js"></script>
<script type="text/javascript" src="/static/js/bbone/backbone.js"></script>
<script type="text/javascript" src="/static/js/d3/d3.js"></script>
<script type="text/javascript" src="/static/js/d3/d3.time.js"></script>
<link rel="stylesheet/less" href="/static/gnarl.less" type="text/css">
<script src="/static/js/less.js" type="text/javascript"></script>
<script src="/static/js/jquery.tmpl.js" type="text/javascript"></script>
<script src="/static/js/knockout-1.2.1.debug.js" type="text/javascript"></script>
<style>
	@import url(http://fonts.googleapis.com/css?family=Pacifico|Chewy|Dancing+Script:400,700);
	@import url(http://fonts.googleapis.com/css?family=Josefin+Sans:400,100|Istok+Web|Philosopher);
</style>
<script type="text/javascript">

//-------------------------------------------------------
// Date Formatting and Scales.
//
var h = 1250, w = 1024;
var y0 = 10, y1 = 914;

var left = 23;

var hour = d3.time.format("%H:%M");

var early = new Date(2011, 0, 1, 5);
var morning = new Date(2011, 0, 1, 9);
var afternoon = new Date(2011, 0, 1, 17);
var night = new Date(2011, 0, 1, 21, 1);

var day_line = d3.time.scale()
    .domain([early, morning, afternoon, night])
//    .rangeRound([10, 110, 610, 710])
    .range([10, 110, 610, 710])

var ticks = day_line.ticks(d3.time.minutes, 15);
//var ticks = day_line.ticks(15);
//var ticks = day_line.ticks(d3.time.seconds, 25);
//var ticks = day_line.ticks(d3.time.minutes, 20);
var m = 4;

$(function() {

    var vis = d3.select("#show")
        .append("svg:svg")
        .attr("width", w)
        .attr("height", h)
        .attr("id", "uncanny");

    var lines = vis.selectAll("line")
        .data(ticks)
      .enter().append("svg:line")
//        .attr("x1", function(d, i) { return left + ((i % m == 0) ? 50 : 54 )})
        .attr("x1", left + 50)
        .attr("x2", function(d, i) { return left + ((i % m == 0) ? 65 : 61 )})
        .attr("y1", day_line)
        .attr("y2", day_line)
        .attr("stroke", function(d, i) { return (i % m == 0) ? "#787D78" : "#ccc" });

    var texts = vis.selectAll("text.date_rule")
        .data(ticks)
    .enter().append("svg:text")
        .filter(function(d, i) { return i % m == 0 })
        .attr("text-anchor", "end")
        .attr("class", "date_rule")
        .attr("x", left + 45)
        .attr("y", day_line)
        .attr("dy", 4)
        .text(hour)

});


//-------------------------------------------------------

</script>
{% endblock %}
{% block body %}
<div class="container">
<div class="row">
<div class="twelve columns" style="float: none">{# The float setting here is to finesse a performance issue with the SVG response when float:left. #}
<div id="hull" class="panel">

    <h1>Hi Y'All!</h1>
    <p>
    Glide your mouse over the circles below to find a date, then click on
    it to make that date the current date.
    </p>

    <div id="show"></div>

</div>{# hull #}
</div></div>{# columns row #}
</div>{# container #}
{% endblock %}
